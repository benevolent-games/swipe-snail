import { asApi } from "../../types.js";
import { processPayloadTopic } from "../../curries.js";
async function verifyTokens(meta) {
    if (!meta.accessToken)
        throw new Error("invalid token");
    return { userId: "u123" };
}
export const makeNuclearApi = () => asApi({
    reactor: processPayloadTopic(verifyTokens, {
        async generatePower(payload, a, b) {
            console.log("user", payload.userId);
            return a + b;
        },
        async radioactiveMeltdown(payload) {
            throw new Error("meltdown error");
        },
    }),
});
export const nuclearShape = {
    reactor: {
        generatePower: "method",
        radioactiveMeltdown: "method",
    }
};
//# sourceMappingURL=example-common.js.map